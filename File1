  //use SFTP to download files
                        //get SFTP configuration id
                        let objSFTPConfigSearchResults = getSFTPConfig();
                        log.debug(_LOGGER_TITLE + "SFTP Config Search: ", objSFTPConfigSearchResults);

                        var objSFTPConfig = {
                            hostKey: objSFTPConfigSearchResults[0].getValue("custrecord_sftp_ib_host_key"),
                            hostKeyType: objSFTPConfigSearchResults[0].getValue("custrecord_sftp_ib_host_key_type"),
                            port: parseInt(objSFTPConfigSearchResults[0].getValue("custrecord_sftp_ib_port")),
                            url: objSFTPConfigSearchResults[0].getValue("custrecord_sftp_ib_server_url"),
                            username: objSFTPConfigSearchResults[0].getValue("custrecord_sftp_ib_username")
                        };

                        //directory on 3rd party server
                        let strDirectory = objSFTPConfigSearchResults[0].getValue({
                            name: "custrecord_ps_sftp_ib_bank_fld_from",
                            join: "CUSTRECORD_PS_SFTP_IB_CONFIG_REL"
                        });
                        objSFTPConfig.directory = strDirectory;

                        // auth: username & password;
                        let INT_AUTH_METHOD_USERNAME = 1;
                        objSFTPConfig.authMethod = INT_AUTH_METHOD_USERNAME;
                        let strPassword = objSFTPConfigSearchResults[0].getValue("custrecord_sftp_ib_password");
                        objSFTPConfig.passwordGuid = strPassword;

                        log.debug(_LOGGER_TITLE + "SFTP config: ", objSFTPConfig);

                        let intNSFolderId = parseInt(objSFTPConfigSearchResults[0].getValue({
                            name: "custrecord_ps_sftp_ib_ns_fld",
                            join: "CUSTRECORD_PS_SFTP_IB_CONFIG_REL"
                        }));
                        log.debug("NS folder id: ", intNSFolderId);

                        var arrFiles = [];
                        if (objSFTPConfig.passwordGuid && intNSFolderId && objSFTPConfig.hostKey && objSFTPConfig.hostKeyType && objSFTPConfig.port &&
                            objSFTPConfig.url && objSFTPConfig.username)
                        {
                            //establish connection
                            let objSFTPConnection = sftp.createConnection(objSFTPConfig);
                            log.debug(_LOGGER_TITLE + "SFTP connection: ", objSFTPConnection);

                            let arrFileList = objSFTPConnection.list();
                            log.debug(_LOGGER_TITLE + "arrFileList: ", arrFileList);

                            log.debug(_LOGGER_TITLE + "file counter: ", arrFiles.length);

                            if (arrFileList.length > 0)
                            {
                                var strFilename = arrFileList[0].name;
                                objSFTPConfig.filename = strFilename;
                                log.debug(_LOGGER_TITLE + "file from SFTP filename: ", strFilename);

                                let objConnection = sftp.createConnection(objSFTPConfig);
                                log.debug(_LOGGER_TITLE + "SFTP connection: ", objConnection);

                                objFile = objConnection.download({
                                    filename: objSFTPConfig.filename
                                });
                            }
                            else
                            {
                                log.debug(_LOGGER_TITLE, "There are no files in the server directory " + strDirectory);
                            }
                        }
                        else {
                            throw error.create({
                                name: 'SFTP CONFIG ERROR',
                                message: 'SFTP Configuration is missing some of the values, please verify the settings in NetSuite.'
                            });
                        }
                    }
